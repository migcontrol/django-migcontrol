{% extends "library/base.html" %}
{% load static %}
{% load i18n %}
{% load wagtailcore_tags %}
{% load wagtailimages_tags %}
{% load bootstrap_tags %}

{% block sidebar %}

  <h4>{% trans "Search filter" %}</h4>

  <form method="GET">

    {% bootstrap_form filter_form %}

    {% bootstrap_buttons submit=_("Filter") %}

  </form>

  {% for block in page.body %}
    {% include_block block %}
  {% endfor %}

{% endblock %}

{% block content %}

<h1 class="migcontrol-page-title">{{ page.title }} ({{ media_pages.count }} {% trans "results" %})</h1>

<table class="table table-sm table-bordered">

  <tbody>
  {% for media_page in media_pages %}
  <tr>
    <td>
      {% if media_page.feature_image %}
      {% image media_page.feature_image width-400 as tmp_photo %}
        <img src="{{ tmp_photo.url }}" alt="illustration of {{ media_page.title  }}">
      {% endif %}
    </td>
    <td>
      <h5><a href="{{ media_page.url }}">{{ media_page.title }}</a></h5>
      <p>{{ media_page.body|truncatechars:100|safe }}</p>
    </td>
  </tr>
  {% endfor %}
  </tbody>
</table>

{% endblock content %}
